"use strict";var Deck=function(){function t(t){if("undefined"!=typeof v[t])return v[t];var n=document.body,e=t[0].toUpperCase()+t.slice(1);if("undefined"!=typeof n[t])return v[t]=t,t;var o="webkit"+e;return o?(v[t]=o,o):(o="moz"+e)?(v[t]=o,o):(o="o"+e)?(v[t]=o,o):(o="ms"+e,o?(v[t]=o,o):void 0)}function n(n,e){var o=t("transition"),i=t("transform"),u=t("transformOrigin");n.fan=function(t,n){var r=t/5,s=10*t,c=t/51*260-130;e.style[u]="50% 110%",setTimeout(function(){e.style[o]=".3s all cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[i]="translate(-"+r+"px, -"+r+"px)",setTimeout(function(){e.style[i]="rotate("+c+"deg)"},300)},s),e.style.zIndex=t,setTimeout(function(){n(t)},1e3+s)}}function e(n,e){var o=t("transform"),i=t("transition"),u=n.value,r=n.suit;n.bysuit=function(t){var s=n.i,c=10*s,f=20*-(7-u),a=105*-(1.5-r);setTimeout(function(){e.style[i]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[o]="translate("+f+"%,"+a+"%)",e.style.zIndex=s,setTimeout(function(){e.style[i]="",t(s)},500)},c)}}function o(n,e){var o=t("transform"),i=t("transition");n.sort=function(t,u,r){var s=t/5,c=10*t;setTimeout(function(){e.style[i]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[o]="translate(-"+s+"px, -150%)"},c),setTimeout(function(){e.style.zIndex=t},200+c),setTimeout(function(){e.style[o]="translate(-"+s+"px, -"+s+"px)",setTimeout(function(){e.style[i]="",n.x=-s,n.y=-s,u(t)},500)},400+c)}}function i(t){var n=Math.round(Math.random())?-1:1;return n*t}function u(n,e){var o=t("transform"),u=t("transition");n.shuffle=function(t,r){var s=n.pos,c=s/5,f=i(40*Math.random()+30),a=2*s;e.style[u]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)",setTimeout(function(){e.style[o]="translate("+f+"%, -"+c+"px)"},a),setTimeout(function(){e.style.zIndex=s},150+a),setTimeout(function(){e.style[o]="translate(-"+c+"px, -"+c+"px)",setTimeout(function(){t||(e.style[u]=""),r(s)},t?100:300)},300+a)}}function r(n,e){var o=t("transform"),i=t("transition");n.intro=function(t,n){var u=t/5;e.style[o]="translate(-"+u+"px, -500%)",e.style.opacity=0,e.style[i]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style.zIndex=t,setTimeout(function(){e.style[o]="translate(-"+u+"px, -"+u+"px)",e.style.opacity=1,setTimeout(function(){e.style[i]="",n&&n(t)},1e3)},10*t)}}function s(t){return document.createElement(t)}function c(i){function c(t){function n(t){var n={};"mousemove"===t.type?(n.x=t.clientX,n.y=t.clientY):(n.x=t.touches[0].clientX,n.y=t.touches[0].clientY),L.style[v]="translate("+(n.x-o.left)+"px, "+(n.y-o.top)+"px)"}function e(t){"mouseup"===t.type?(l(window,"mousemove",n),l(window,"mouseup",e)):(l(window,"touchmove",n),l(window,"touchend",e)),L.style.zIndex=h++}var o=y.getBoundingClientRect();"mousedown"===t.type?(a(window,"mousemove",n),a(window,"mouseup",e)):(l(window,"touchmove",n),l(window,"touchend",e)),L.style[p]=""}function d(t){t.appendChild(L),y=t}function m(){y&&y.removeChild(L),y=null}var y,p=t("transition"),v=t("transform"),h=52,x=i%13+1,b=1===x?"A":11===x?"J":12===x?"Q":13===x?"K":x,w=i/13|0,T=f(w),z=w%2?"red":"black",g=(52-i)/5,C={i:i,value:x,suit:w,pos:i,$el:L,mount:d,unmount:m},L=s("div"),E=s("div"),I=s("div"),q=s("div");return L.classList.add("card",z),E.classList.add("suit"),I.classList.add("topleft"),q.classList.add("bottomright"),E.textContent=T,I.innerHTML=b+"<br>"+T,q.innerHTML=b+"<br>"+T,L.style.zIndex=52-i,L.style[v]="translate(-"+g+"px, -"+g+"px)",L.appendChild(E),L.appendChild(I),L.appendChild(q),r(C,L),u(C,L),o(C,L),e(C,L),n(C,L),a(L,"mousedown",c),a(L,"touchstart",c),C}function f(t){return 0===t?"♠︎":1===t?"♥︎":2===t?"♣︎":"♦"}function a(t,n,e){t.addEventListener(n,e)}function l(t,n,e){t.removeEventListener(n,e)}function d(t,n){function e(t){return 0===o?(o=-1,void(t&&t())):(-1===o?o=2:o--,n.sort(function(){return 100*Math.random()-50}),void n.forEach(function(n,i){n.pos=i,n.shuffle(o,function(n){51===n&&e(t)})}))}var o=-1;t.shuffle=function(){t.queue(e)}}function m(t){function n(t){t&&(o.push(t),1===o.length&&e())}function e(){o[0](function(t){if(t)throw t;o=o.slice(1),o.length&&e()})}var o=[];return t.queue=n,t}function y(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function p(){function t(t){u=t,u.appendChild(l)}function n(){u.removeChild(l)}function e(){a.queue(function(t){f.forEach(function(n,e){n.fan(e,function(n){51===n&&t()})})})}function o(){a.sort(!0),a.queue(function(t){f.forEach(function(n){n.bysuit(function(n){51===n&&t()})})})}function i(t){a.queue(function(n){f.sort(function(n,e){return t?n.i-e.i:e.i-n.i}),f.forEach(function(e,o){e.sort(o,function(t){51===t&&n()},t)})})}var u,r,f=new Array(52),a=y({mount:t,unmount:n,cards:f}),l=s("div");return m(a),d(a,f),a.sort=i,a.bysuit=o,a.fan=e,l.classList.add("deck"),a.queue(function(t){for(var n=0,e=f.length;e>n;n++)r=f[n]=c(n),r.intro(n,function(n){51===n&&t()}),r.mount(l)}),a.shuffle(),a.sort(),a}var v={};return p}();