"use strict";var Deck=function(){function t(t){if("undefined"!=typeof v[t])return v[t];var n=document.body,e=t[0].toUpperCase()+t.slice(1);if("undefined"!=typeof n[t])return v[t]=t,t;var o="webkit"+e;return o?(v[t]=o,o):(o="moz"+e)?(v[t]=o,o):(o="o"+e)?(v[t]=o,o):(o="ms"+e,o?(v[t]=o,o):void 0)}function n(t,n){t.fan=function(t,e){var o=t/5,i=10*t,u=t/51*260-130;n.style[b]="50% 110%",setTimeout(function(){n.style[h]=".3s all cubic-bezier(0.645, 0.045, 0.355, 1.000)",n.style[x]="translate(-"+o+"px, -"+o+"px)",setTimeout(function(){n.style[x]="rotate("+u+"deg)"},300)},i),n.style.zIndex=t,setTimeout(function(){e(t)},1e3+i)}}function e(t,n){var e=t.value,o=t.suit;t.bysuit=function(i){var u=t.i,r=10*u,s=20*-(7-e),c=105*-(1.5-o);setTimeout(function(){n.style[T]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",n.style[w]="translate("+s+"%,"+c+"%)",n.style.zIndex=u,setTimeout(function(){n.style[T]="",i(u)},500)},r)}}function o(t,n){t.sort=function(e,o,i){var u=e/5,r=10*e;setTimeout(function(){n.style[g]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",n.style[z]="translate(-"+u+"px, -150%)"},r),setTimeout(function(){n.style.zIndex=e},200+r),setTimeout(function(){n.style[z]="translate(-"+u+"px, -"+u+"px)",setTimeout(function(){n.style[g]="",t.x=-u,t.y=-u,o(e)},500)},400+r)}}function i(t){var n=Math.round(Math.random())?-1:1;return n*t}function u(t,n){t.shuffle=function(e,o){var u=t.pos,r=u/5,s=i(40*Math.random()+30),c=2*u;n.style[L]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)",setTimeout(function(){n.style[C]="translate("+s+"%, -"+r+"px)"},c),setTimeout(function(){n.style.zIndex=u},150+c),setTimeout(function(){n.style[C]="translate(-"+r+"px, -"+r+"px)",setTimeout(function(){e||(n.style[L]=""),o(u)},e?100:300)},300+c)}}function r(t,n){t.intro=function(t,e){var o=t/5;n.style[E]="translate(-"+o+"px, -500%)",n.style.opacity=0,n.style[I]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",n.style.zIndex=t,setTimeout(function(){n.style[E]="translate(-"+o+"px, -"+o+"px)",n.style.opacity=1,setTimeout(function(){n.style[I]="",e&&e(t)},1e3)},10*t)}}function s(t){return document.createElement(t)}function c(t){function i(t){function n(t){var n={};"mousemove"===t.type?(n.x=t.clientX,n.y=t.clientY):(n.x=t.touches[0].clientX,n.y=t.touches[0].clientY),T.style[M]="translate("+(n.x-o.left)+"px, "+(n.y-o.top)+"px)"}function e(t){"mouseup"===t.type?(l(window,"mousemove",n),l(window,"mouseup",e)):(l(window,"touchmove",n),l(window,"touchend",e)),T.style.zIndex=k++}var o=m.getBoundingClientRect();"mousedown"===t.type?(a(window,"mousemove",n),a(window,"mouseup",e)):(l(window,"touchmove",n),l(window,"touchend",e)),T.style[q]=""}function c(t){t.appendChild(T),m=t}function d(){m&&m.removeChild(T),m=null}var m,y=t%13+1,p=1===y?"A":11===y?"J":12===y?"Q":13===y?"K":y,v=t/13|0,h=f(v),x=v%2?"red":"black",b=(52-t)/5,w={i:t,value:y,suit:v,pos:t,$el:T,mount:c,unmount:d},T=s("div"),z=s("div"),g=s("div"),C=s("div");return a(T,"mousedown",i),a(T,"touchstart",i),T.classList.add("card",x),z.classList.add("suit"),g.classList.add("topleft"),C.classList.add("bottomright"),z.textContent=h,g.innerHTML=p+"<br>"+h,C.innerHTML=p+"<br>"+h,T.style.zIndex=52-t,T.style[M]="translate(-"+b+"px, -"+b+"px)",T.appendChild(z),T.appendChild(g),T.appendChild(C),r(w,T),u(w,T),o(w,T),e(w,T),n(w,T),w}function f(t){return 0===t?"♠︎":1===t?"♥︎":2===t?"♣︎":"♦"}function a(t,n,e){t.addEventListener(n,e)}function l(t,n,e){t.removeEventListener(n,e)}function d(t,n){function e(t){return 0===o?(o=-1,void(t&&t())):(-1===o?o=2:o--,n.sort(function(){return 100*Math.random()-50}),void n.forEach(function(n,i){n.pos=i,n.shuffle(o,function(n){51===n&&e(t)})}))}var o=-1;t.shuffle=function(){t.queue(e)}}function m(t){function n(t){t&&(o.push(t),1===o.length&&e())}function e(){o[0](function(t){if(t)throw t;o=o.slice(1),o.length&&e()})}var o=[];return t.queue=n,t}function y(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function p(){function t(t){u=t,u.appendChild(l)}function n(){u.removeChild(l)}function e(){a.queue(function(t){f.forEach(function(n,e){n.fan(e,function(n){51===n&&t()})})})}function o(){a.sort(!0),a.queue(function(t){f.forEach(function(n){n.bysuit(function(n){51===n&&t()})})})}function i(t){a.queue(function(n){f.sort(function(n,e){return t?n.i-e.i:e.i-n.i}),f.forEach(function(e,o){e.sort(o,function(t){51===t&&n()},t)})})}var u,r,f=new Array(52),a=y({mount:t,unmount:n,cards:f}),l=s("div");return m(a),d(a,f),a.sort=i,a.bysuit=o,a.fan=e,l.classList.add("deck"),a.queue(function(t){for(var n=0,e=f.length;e>n;n++)r=f[n]=c(n),r.intro(n,function(n){51===n&&t()}),r.mount(l)}),a.shuffle(),a.sort(),a}var v={},h=t("transition"),x=t("transform"),b=t("transformOrigin"),w=t("transform"),T=t("transition"),z=t("transform"),g=t("transition"),C=t("transform"),L=t("transition"),E=t("transform"),I=t("transition"),q=t("transition"),M=t("transform"),k=52;return p}();