"use strict";var Deck=function(){function t(t){if("undefined"!=typeof x[t])return x[t];if("undefined"!=typeof h[t])return x[t]=t,t;for(var n,e=t[0].toUpperCase()+t.slice(1),o=["webkit","moz","Moz","ms","o"],i=0,u=o.length;u>i;i++)if(n=o[i]+e,"undefined"!=typeof h[n])return x[t]=n,n}function n(n,e){var o=t("transform"),i=t("transition"),u=t("transitionDelay");n.poker=function(t,n){var s=250*t,r={x:110*(t-2),y:-125};setTimeout(function(){e.style[i]="all .25s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[u]=s/1e3+"s",e.style[o]="translate("+r.x+"%, "+r.y+"%)"},0),setTimeout(function(){e.style[i]="",n(t)},s+250)}}function e(n,e){var o=t("transform"),i=t("transformOrigin"),u=t("transition"),s=t("transitionDelay");n.fan=function(t,n){var r=t/5,c=10*t,a=t/51*260-130;e.style[i]="50% 110%",setTimeout(function(){e.style[u]=".3s all cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[s]=c/1e3+"s",e.style[o]="translate(-"+r+"px, -"+r+"px)",setTimeout(function(){e.style[s]="",e.style[o]="rotate("+a+"deg)"},300+c)},0),e.style.zIndex=t,setTimeout(function(){n(t)},1e3+c)}}function o(n,e){var o=t("transform"),i=t("transition"),u=t("transitionDelay"),s=n.value,r=n.suit;n.bysuit=function(t){var c=n.i,a=10*c,f=20*-(7-s),l=105*-(1.5-r);setTimeout(function(){e.style[i]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[u]=a/1e3+"s",e.style[o]="translate("+f+"%,"+l+"%)",e.style.zIndex=c,setTimeout(function(){e.style[i]="",t(c)},500+a)},0)}}function i(n,e){var o=t("transform"),i=t("transition");n.sort=function(t,u,s){var r=t/5,c=10*t;setTimeout(function(){e.style[i]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[o]="translate(-"+r+"px, -150%)"},c),setTimeout(function(){e.style.zIndex=t},200+c),setTimeout(function(){e.style[o]="translate(-"+r+"px, -"+r+"px)",setTimeout(function(){e.style[i]="",n.x=-r,n.y=-r,u(t)},500)},400+c)}}function u(t){var n=Math.round(Math.random())?-1:1;return n*t}function s(n,e){var o=t("transform"),i=t("transition"),s=t("transitionDelay");n.shuffle=function(t,r){var c=n.pos,a=c/5,f=u(40*Math.random()+30),l=2*c;e.style[i]="all .2s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[s]=l/1e3+"s",setTimeout(function(){e.style[o]="translate("+f+"%, -"+a+"px)"},0),setTimeout(function(){e.style[s]="",e.style.zIndex=c},100+l),setTimeout(function(){e.style[o]="translate(-"+a+"px, -"+a+"px)",setTimeout(function(){t||(e.style[i]=""),r(c)},200)},200+l)}}function r(n,e){var o=t("transform"),i=t("transition"),u=t("transitionDelay");n.intro=function(t,n){var s=10*t+250,r=t/5;e.style[o]="translate(-"+r+"px, -250%)",e.style.opacity=0,e.style.zIndex=t,setTimeout(function(){e.style[i]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",e.style[u]=s/1e3+"s",e.style[o]="translate(-"+r+"px, -"+r+"px)",e.style.opacity=1,setTimeout(function(){e.style[i]="",n&&n(t)},1250+s)},0)}}function c(t){return document.createElement(t)}function a(u){function a(t){function n(t){var n={};"mousemove"===t.type?(n.x=t.clientX,n.y=t.clientY):(n.x=t.touches[0].clientX,n.y=t.touches[0].clientY),L.style[h]="translate("+(n.x-o.left)+"px, "+(n.y-o.top)+"px)"}function e(t){"mouseup"===t.type?(d(window,"mousemove",n),d(window,"mouseup",e)):(d(window,"touchmove",n),d(window,"touchend",e)),L.style.zIndex=x++}var o=p.getBoundingClientRect();"mousedown"===t.type?(l(window,"mousemove",n),l(window,"mouseup",e)):(l(window,"touchmove",n),l(window,"touchend",e)),L.style[v]=""}function y(t){t.appendChild(L),p=t}function m(){p&&p.removeChild(L),p=null}var p,v=t("transition"),h=t("transform"),x=52,b=u%13+1,w=1===b?"A":11===b?"J":12===b?"Q":13===b?"K":b,T=u/13|0,z=f(T),g=T%2?"red":"black",C=(52-u)/5,E={i:u,value:b,suit:T,pos:u,$el:L,mount:y,unmount:m},L=c("div"),k=c("div"),q=c("div"),I=c("div");return L.classList.add("card",g),k.classList.add("suit"),q.classList.add("topleft"),I.classList.add("bottomright"),k.textContent=z,q.innerHTML=w+"<br>"+z,I.innerHTML=w+"<br>"+z,L.style.zIndex=52-u,L.style[h]="translate(-"+C+"px, -"+C+"px)",L.appendChild(k),L.appendChild(q),L.appendChild(I),r(E,L),s(E,L),i(E,L),o(E,L),e(E,L),n(E,L),l(L,"mousedown",a),l(L,"touchstart",a),E}function f(t){return 0===t?"♠︎":1===t?"♥︎":2===t?"♣︎":"♦"}function l(t,n,e){t.addEventListener(n,e)}function d(t,n,e){t.removeEventListener(n,e)}function y(t,n){function e(t){return 0===o?(o=-1,void(t&&t())):(-1===o?o=1:o--,n.sort(function(){return 100*Math.random()-50}),void n.forEach(function(n,i){n.pos=i,n.shuffle(o,function(n){51===n&&e(t)})}))}var o=-1;t.shuffle=function(){t.queue(e)}}function m(t){function n(t){t&&(o.push(t),1===o.length&&e())}function e(){o[0](function(t){if(t)throw t;o=o.slice(1),o.length&&e()})}var o=[];return t.queue=n,t}function p(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function v(){function t(t){s=t,s.appendChild(d)}function n(){s.removeChild(d)}function e(){l.queue(function(t){f.forEach(function(n,e){n.fan(e,function(n){51===n&&t()})})})}function o(){l.sort(!0),l.queue(function(t){f.forEach(function(n){n.bysuit(function(n){51===n&&t()})})})}function i(){l.shuffle(),l.queue(function(t){f.slice(-5).reverse().forEach(function(n,e){n.poker(e,function(n){4===n&&t()})})})}function u(t){l.queue(function(n){f.sort(function(n,e){return t?n.i-e.i:e.i-n.i}),f.forEach(function(e,o){e.sort(o,function(t){51===t&&n()},t)})})}var s,r,f=new Array(52),l=p({mount:t,unmount:n,cards:f}),d=c("div");return m(l),y(l,f),l.sort=u,l.bysuit=o,l.poker=i,l.fan=e,d.classList.add("deck"),l.queue(function(t){for(var n=0,e=f.length;e>n;n++)r=f[n]=a(n),r.intro(n,function(n){51===n&&t()}),r.mount(d)}),l.sort(),l}var h=document.createElement("p").style,x={};return v}();