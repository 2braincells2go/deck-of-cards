"use strict";var Deck=function(){function t(t){if("undefined"!=typeof b[t])return b[t];if("undefined"!=typeof x[t])return b[t]=t,t;for(var n,e=t[0].toUpperCase()+t.slice(1),o=["webkit","moz","Moz","ms","o"],i=0,u=o.length;u>i;i++)if(n=o[i]+e,"undefined"!=typeof x[n])return b[t]=n,n}function n(t,n,e){return e=e||0,g?"translate3d("+t+", "+n+", "+e+")":"translate("+t+", "+n+")"}function e(e,o){var i=t("transform"),u=t("transition"),s=t("transitionDelay");e.poker=function(t,e){var r=250*t,c={x:110*(t-2),y:-125};setTimeout(function(){o.style[u]="all .25s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[s]=r/1e3+"s",o.style[i]=n(c.x+"%",c.y+"%")},0),setTimeout(function(){o.style[u]="",e(t)},r+250)}}function o(e,o){var i=t("transform"),u=t("transformOrigin"),s=t("transition"),r=t("transitionDelay");e.fan=function(t,e){var c=t/4,f=10*t,l=t/51*260-130;o.style[u]="50% 110%",setTimeout(function(){o.style[s]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[r]=f/1e3+"s",o.style[i]=n(-c+"px",-c+"px"),o.style.zIndex=t,setTimeout(function(){o.style[r]="",o.style[i]=n(0,0)+"rotate("+l+"deg)"},300+f)},0),setTimeout(function(){e(t)},1e3+f)}}function i(e,o){var i=t("transform"),u=t("transition"),s=t("transitionDelay"),r=e.value,c=e.suit;e.bysuit=function(t){var f=e.i,l=10*f,a=20*-(7-r),d=105*-(1.5-c);setTimeout(function(){o.style[u]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[s]=l/1e3+"s",o.style[i]=n(a+"%",d+"%"),o.style.zIndex=f,setTimeout(function(){o.style[u]="",t(f)},500+l)},0)}}function u(e,o){var i=t("transform"),u=t("transition");e.sort=function(t,s,r){var c=t/4,f=10*t;setTimeout(function(){o.style[u]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[i]=n(-c+"px","-150%")},f),setTimeout(function(){o.style.zIndex=t},200+f),setTimeout(function(){o.style[i]=n(-c+"px",-c+"px"),setTimeout(function(){o.style[u]="",e.x=-c,e.y=-c,s(t)},500)},400+f)}}function s(t){var n=Math.round(Math.random())?-1:1;return n*t}function r(e,o){var i=t("transform"),u=t("transition"),r=t("transitionDelay");e.shuffle=function(t,c){var f=e.pos,l=f/4,a=s(40*Math.random()+30),d=2*f;o.style[u]="all .2s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[r]=d/1e3+"s",setTimeout(function(){o.style[i]=n(a+"%",-l+"px")},0),setTimeout(function(){o.style[r]="",o.style.zIndex=f},100+d),setTimeout(function(){o.style[i]=n(-l+"px",-l+"px"),setTimeout(function(){t||(o.style[u]=""),c(f)},200)},200+d)}}function c(e,o){var i=t("transform"),u=t("transition"),s=t("transitionDelay");e.intro=function(t,e){var r=10*t+250,c=t/4;o.style[i]=n(-c+"px","-250%"),o.style.opacity=0,o.style.zIndex=t,setTimeout(function(){o.style[u]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[s]=r/1e3+"s",o.style[i]=n(-c+"px",-c+"px"),o.style.opacity=1,setTimeout(function(){o.style[u]="",e&&e(t)},1250+r)},0)}}function f(t){return document.createElement(t)}function l(s){function l(t){function e(t){var e={};"mousemove"===t.type?(e.x=t.clientX,e.y=t.clientY):(e.x=t.touches[0].clientX,e.y=t.touches[0].clientY),k.style[h]="",k.style[x]=n(e.x-i.left+"px",e.y-i.top+"px")}function o(t){"mouseup"===t.type?(y(window,"mousemove",e),y(window,"mouseup",o)):(y(window,"touchmove",e),y(window,"touchend",o))}var i=v.getBoundingClientRect(),u={};"mousedown"===t.type?(u.x=t.clientX,u.y=t.clientY,d(window,"mousemove",e),d(window,"mouseup",o)):(u.x=t.touches[0].clientX,u.y=t.touches[0].clientY,d(window,"touchmove",e),d(window,"touchend",o)),k.style[h]="all .2s cubic-bezier(0.215, 0.610, 0.355, 1.000)",k.style[x]=n(u.x-i.left+"px",u.y-i.top+"px"),k.style.zIndex=b++}function p(t){t.appendChild(k),v=t}function m(){v&&v.removeChild(k),v=null}var v,h=t("transition"),x=t("transform"),b=52,w=s%13+1,T=1===w?"A":11===w?"J":12===w?"Q":13===w?"K":w,g=s/13|0,z=a(g),C=g%2?"red":"black",E=(52-s)/4,L={i:s,value:w,suit:g,pos:s,$el:k,mount:p,unmount:m},k=f("div"),q=f("div"),I=f("div"),M=f("div");return k.classList.add("card",C),q.classList.add("suit"),I.classList.add("topleft"),M.classList.add("bottomright"),q.textContent=z,I.innerHTML=T+"<br>"+z,M.innerHTML=T+"<br>"+z,k.style.zIndex=52-s,k.style[x]="translate(-"+E+"px, -"+E+"px)",k.appendChild(q),k.appendChild(I),k.appendChild(M),c(L,k),r(L,k),u(L,k),i(L,k),o(L,k),e(L,k),d(k,"mousedown",l),d(k,"touchstart",l),L}function a(t){return 0===t?"♠︎":1===t?"♥︎":2===t?"♣︎":"♦"}function d(t,n,e){t.addEventListener(n,e)}function y(t,n,e){t.removeEventListener(n,e)}function p(t,n){function e(t){return 0===o?(o=-1,void(t&&t())):(-1===o?o=1:o--,n.sort(function(){return 100*Math.random()-50}),void n.forEach(function(n,i){n.pos=i,n.shuffle(o,function(n){51===n&&e(t)})}))}var o=-1;t.shuffle=function(){t.queue(e)}}function m(t){function n(t){t&&(o.push(t),1===o.length&&e())}function e(){o[0](function(t){if(t)throw t;o=o.slice(1),o.length&&e()})}var o=[];return t.queue=n,t}function v(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function h(){function t(t){s=t,s.appendChild(d)}function n(){s.removeChild(d)}function e(){a.queue(function(t){c.forEach(function(n,e){n.fan(e,function(n){51===n&&t()})})})}function o(){a.sort(!0),a.queue(function(t){c.forEach(function(n){n.bysuit(function(n){51===n&&t()})})})}function i(){a.shuffle(),a.queue(function(t){c.slice(-5).reverse().forEach(function(n,e){n.poker(e,function(n){4===n&&t()})})})}function u(t){a.queue(function(n){c.sort(function(n,e){return t?n.i-e.i:e.i-n.i}),c.forEach(function(e,o){e.sort(o,function(t){51===t&&n()},t)})})}var s,r,c=new Array(52),a=v({mount:t,unmount:n,cards:c}),d=f("div");return m(a),p(a,c),a.sort=u,a.bysuit=o,a.poker=i,a.fan=e,d.classList.add("deck"),a.queue(function(t){for(var n=0,e=c.length;e>n;n++)r=c[n]=l(n),r.intro(n,function(n){51===n&&t()}),r.mount(d)}),a.sort(),a}var x=document.createElement("p").style,b={},w=document.createElement("p"),T=t("transform");document.body.appendChild(w),w.style[T]="translate3d(1px,1px,1px)";var g=window.getComputedStyle(w).getPropertyValue(T);return g=null!=g&&g.length&&"none"!==g,console.log("3d support",g),document.body.removeChild(w),h}();
